@require colors

.post-view
    width: 100%
    display: flex !important
    flex-direction: column
    position: relative

    .sidebar
        width: 21em
        @media (max-width: 800px)
            min-width: 100%
            max-width: 0

            margin-top: 1em


        line-height: 160%

        a:active
            border: 0
            outline: 0
        @media (min-width: 801px)
            nav.buttons
                display: flex
                flex-wrap: wrap

                margin-top: 0

                article
                    flex: 1 0 25%
                    a
                        display: inline-block

                        width: 100%

                        padding: 0.3em 0

                        text-align: center
                        vertical-align: middle

                        //transition: background 0.2s linear, box-shadow 0.2s linear
                        transition: background 0.15s linear, box-shadow 0.15s linear
                        &:not(.inactive):hover
                            background: darken($main-color, 90%)
                    i
                        font-size: 140%
                    text-align: center
        .tag-icon
            width: 1em
            text-align: right

        #add-comment-button
            display: block
            width: fit-content

            h3
                margin: 0
                margin-top: .7em

                font-size: 1em
                @media (max-width: 800px)
                    font-size: 1.1em

    .content
        display: flex
        flex-direction: column
        align-items: center

        position: absolute
        pointer-events: none

        width: 100%
        >*
            pointer-events: all

    @media (min-width: 801px)
        .download
            display: flex
            flex-direction: column
            align-items: center

            position: absolute
            align-self: flex-end

            width: fit-content
            .la
                font-size: 32px

    .download
        .dims
            display: none

    .post-container
        @media (min-width: 801px) {
            margin-top: 2.5em
        }

        .post-content
            margin: 0
            height: fit-content !important

    @media (max-width: 800px)
        .content
            .buttons
                display: flex
                justify-content: center

                font-size: 20px

                margin-top: 20px
                gap: 15vw

    .comments-container
        width: 100%

        margin-top: 2em
        margin-bottom: 2em

        pointer-events: none
        .comment-container
            justify-content: center

            >*
                pointer-events: all
            .comment
                display: flex
                flex-direction: column

                width: 72vw
                max-width: 450px
                &.can-edit-comment
                    max-width: 600px

                header
                    white-space: normal
                    a
                        white-space: nowrap
                .comment-content p
                    margin: 0

    .comment-form-container
        margin-top: 2em

    @media (max-width: 800px)
        .sidebar
            .sidebar-container
                .readonly-sidebar
                    display: flex
                    justify-content: space-between


.darktheme .post-view
    >.sidebar
        nav.buttons
            article
                a:not(.inactive):hover
                    background: unset
                    box-shadow: inset 0 0 0 0.125em $main-color

.post-view .readonly-sidebar

    //body:not(.rank-moderator, .rank-administrator) & .user
    //    display: none

    .la-download
        color: $download-icon-color
        font-size: 32px
        &:hover
            color: lighten($download-icon-color, 20%)

    .details
        display: flex
        flex-direction: column

        section
            width: fit-content

        i
            display: inline-block
            width: 1em
            text-align: center

        .safety-safe
            color: $safety-safe
        .safety-sketchy
            color: $safety-sketchy
        .safety-unsafe
            color: $safety-unsafe

        .upload-info
            max-width: 30vw

            margin-top: 5px

            .thumbnail
                width: 1em
                height: 1em
                margin: -0.1em 0.6em 0 0
            time
                font-size: 85%
                //color: #b4b4b4
                display: block

        .zoom
            display: none
            margin-top: 1em
            a
                display: inline-block
            .active
                text-decoration: underline

        .search
            //display: none
            font-size: 85%
            margin-top: 0.5em

        .safety
            display: none

        .social
            display: flex
            flex-wrap: wrap

            font-size: 105%

            margin-top: 1em

            .score-container
                float: left
                margin-bottom: 5px

                .downvote i
                    text-align: right

            .fav-container
                margin-left: 2em

            i
                text-align: left
                margin: 0

            .value
                text-align: center
                display: inline-block
                width: 2em

        /*@media (max-width: 800px)
            order: 2
            margin-top: 1em*/

    .relations
        h1
            margin-bottom: 0.5em
        .thumbnail
            //width: 4em
            //height: 3em
        li
            margin: 0 0.3em 0.3em 0
            display: inline-block

    .see-more
        &:not(:has(img))
            display: none

        &:not(:has(.similar-item))
            .see-more-link
                display: none

    .see-more
        h2
            font-size: 1.3em

            justify-self: center

            margin-bottom: 0.5em

        &:has(.similar > ul > li:only-child)
            h2
                justify-self: end

        @media (min-width: 801px)
            position: absolute
            right: 0
            top: 2em

        nav
            margin-bottom: 0.8em
            ul
                gap: 0.8em

        .see-more-link
            margin-top: 0.4em


    .similar
        display: flex
        flex-direction: column

        align-items: flex-end

        ul
            display: grid
            grid-template-columns: repeat(2, 1fr)

            direction: rtl;

            li
                a .thumbnail
                    width: 4em
                    height: auto

                    .gallery-thumb
                        min-height: 2em
                        max-height: 6em

        span
            transition: transform 0.16s ease-in
            &:hover
                transform: scale(1.1)

    .tags, .metrics
        h1
            margin-bottom: 0.5em
        /*@media (max-width: 800px)
            margin-top: 0
            h1
                display: none*/

    .tags
        max-width: 17vw
        @media (max-width: 800px)
            max-width: 50vw

        margin-top: 0.3em
        .tag-link-info
            &:hover
                opacity: 0.9
        .tag-link-posts
            &:hover
                opacity: 0.9
        p
            margin-bottom: .3em

.edit-sidebar
    position: relative

    background-color: #1a1a1a
    border: 1px solid #474747

    padding: 5px
    padding-top: 10px

    z-index: 50

.post-view .edit-sidebar
    .expander-content
        section:not(:last-child)
            margin-bottom: 1em

    .safety
        &>label
            width: 100%
        .radio-wrapper
            display: flex
            flex-wrap: wrap
        .radio-wrapper label
            flex-grow: 1
            display: inline-block

    .management
        ul
            list-style-type: none
            margin: 0
            padding: 0
            li
                margin: 0
                padding: 0

    .post-source
        textarea
            white-space: pre
            overflow-wrap: normal
            overflow-x: scroll

    form
        width: auto

    label:not(.file-dropper)
        margin-bottom: 0.3em
        display: block

    input[type=submit],
    input[type=button],
    button
        width: 100%
        &:focus
            border: 2px solid $text-color !important

    .messages
        margin-top: 1em
